<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GanttRenderer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jfreechart$JaCoCo.exec</a> &gt; <a href="index.source.html" class="el_package">org.jfree.chart.renderer.category</a> &gt; <span class="el_source">GanttRenderer.java</span></div><h1>GanttRenderer.java</h1><pre class="source lang-java linenums">/* ===========================================================
 * JFreeChart : a free chart library for the Java(tm) platform
 * ===========================================================
 *
 * (C) Copyright 2000-2013, by Object Refinery Limited and Contributors.
 *
 * Project Info:  http://www.jfree.org/jfreechart/index.html
 *
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
 * License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 * [Oracle and Java are registered trademarks of Oracle and/or its affiliates. 
 * Other names may be trademarks of their respective owners.]
 *
 * ------------------
 * GanttRenderer.java
 * ------------------
 * (C) Copyright 2003-2013, by Object Refinery Limited.
 *
 * Original Author:  David Gilbert (for Object Refinery Limited);
 * Contributor(s):   -;
 *
 * Changes
 * -------
 * 16-Sep-2003 : Version 1 (DG);
 * 23-Sep-2003 : Fixed Checkstyle issues (DG);
 * 21-Oct-2003 : Bar width moved into CategoryItemRendererState (DG);
 * 03-Feb-2004 : Added get/set methods for attributes (DG);
 * 12-Aug-2004 : Fixed rendering problem with maxBarWidth attribute (DG);
 * 05-Nov-2004 : Modified drawItem() signature (DG);
 * 20-Apr-2005 : Renamed CategoryLabelGenerator
 *               --&gt; CategoryItemLabelGenerator (DG);
 * 01-Dec-2005 : Fix for bug 1369954, drawBarOutline flag ignored (DG);
 * ------------- JFREECHART 1.0.x --------------------------------------------
 * 17-Jan-2006 : Set includeBaseInRange flag to false (DG);
 * 20-Mar-2007 : Implemented equals() and fixed serialization (DG);
 * 24-Jun-2008 : Added new barPainter mechanism (DG);
 * 26-Jun-2008 : Added crosshair support (DG);
 * 19-May-2009 : Fixed FindBugs warnings, patch by Michal Wozniak (DG);
 * 03-Jul-2013 : Use ParamChecks (DG);
 * 
 */

package org.jfree.chart.renderer.category;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.Stroke;
import java.awt.geom.Rectangle2D;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.entity.EntityCollection;
import org.jfree.chart.event.RendererChangeEvent;
import org.jfree.chart.labels.CategoryItemLabelGenerator;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.util.ParamChecks;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.gantt.GanttCategoryDataset;
import org.jfree.io.SerialUtilities;
import org.jfree.ui.RectangleEdge;
import org.jfree.util.PaintUtilities;

/**
 * A renderer for simple Gantt charts.  The example shown
 * here is generated by the &lt;code&gt;GanttDemo1.java&lt;/code&gt; program
 * included in the JFreeChart Demo Collection:
 * &lt;br&gt;&lt;br&gt;
 * &lt;img src=&quot;../../../../../images/GanttRendererSample.png&quot;
 * alt=&quot;GanttRendererSample.png&quot; /&gt;
 */
public class GanttRenderer extends IntervalBarRenderer
        implements Serializable {

    /** For serialization. */
    private static final long serialVersionUID = -4010349116350119512L;

    /** The paint for displaying the percentage complete. */
    private transient Paint completePaint;

    /** The paint for displaying the incomplete part of a task. */
    private transient Paint incompletePaint;

    /**
     * Controls the starting edge of the progress indicator (expressed as a
     * percentage of the overall bar width).
     */
    private double startPercent;

    /**
     * Controls the ending edge of the progress indicator (expressed as a
     * percentage of the overall bar width).
     */
    private double endPercent;

    /**
     * Creates a new renderer.
     */
    public GanttRenderer() {
<span class="fc" id="L118">        super();</span>
<span class="fc" id="L119">        setIncludeBaseInRange(false);</span>
<span class="fc" id="L120">        this.completePaint = Color.green;</span>
<span class="fc" id="L121">        this.incompletePaint = Color.red;</span>
<span class="fc" id="L122">        this.startPercent = 0.35;</span>
<span class="fc" id="L123">        this.endPercent = 0.65;</span>
<span class="fc" id="L124">    }</span>

    /**
     * Returns the paint used to show the percentage complete.
     *
     * @return The paint (never &lt;code&gt;null&lt;/code&gt;.
     *
     * @see #setCompletePaint(Paint)
     */
    public Paint getCompletePaint() {
<span class="nc" id="L134">        return this.completePaint;</span>
    }

    /**
     * Sets the paint used to show the percentage complete and sends a
     * {@link RendererChangeEvent} to all registered listeners.
     *
     * @param paint  the paint (&lt;code&gt;null&lt;/code&gt; not permitted).
     *
     * @see #getCompletePaint()
     */
    public void setCompletePaint(Paint paint) {
<span class="fc" id="L146">        ParamChecks.nullNotPermitted(paint, &quot;paint&quot;);</span>
<span class="fc" id="L147">        this.completePaint = paint;</span>
<span class="fc" id="L148">        fireChangeEvent();</span>
<span class="fc" id="L149">    }</span>

    /**
     * Returns the paint used to show the percentage incomplete.
     *
     * @return The paint (never &lt;code&gt;null&lt;/code&gt;).
     *
     * @see #setCompletePaint(Paint)
     */
    public Paint getIncompletePaint() {
<span class="nc" id="L159">        return this.incompletePaint;</span>
    }

    /**
     * Sets the paint used to show the percentage incomplete and sends a
     * {@link RendererChangeEvent} to all registered listeners.
     *
     * @param paint  the paint (&lt;code&gt;null&lt;/code&gt; not permitted).
     *
     * @see #getIncompletePaint()
     */
    public void setIncompletePaint(Paint paint) {
<span class="fc" id="L171">        ParamChecks.nullNotPermitted(paint, &quot;paint&quot;);</span>
<span class="fc" id="L172">        this.incompletePaint = paint;</span>
<span class="fc" id="L173">        fireChangeEvent();</span>
<span class="fc" id="L174">    }</span>

    /**
     * Returns the position of the start of the progress indicator, as a
     * percentage of the bar width.
     *
     * @return The start percent.
     *
     * @see #setStartPercent(double)
     */
    public double getStartPercent() {
<span class="fc" id="L185">        return this.startPercent;</span>
    }

    /**
     * Sets the position of the start of the progress indicator, as a
     * percentage of the bar width, and sends a {@link RendererChangeEvent} to
     * all registered listeners.
     *
     * @param percent  the percent.
     *
     * @see #getStartPercent()
     */
    public void setStartPercent(double percent) {
<span class="fc" id="L198">        this.startPercent = percent;</span>
<span class="fc" id="L199">        fireChangeEvent();</span>
<span class="fc" id="L200">    }</span>

    /**
     * Returns the position of the end of the progress indicator, as a
     * percentage of the bar width.
     *
     * @return The end percent.
     *
     * @see #setEndPercent(double)
     */
    public double getEndPercent() {
<span class="fc" id="L211">        return this.endPercent;</span>
    }

    /**
     * Sets the position of the end of the progress indicator, as a percentage
     * of the bar width, and sends a {@link RendererChangeEvent} to all
     * registered listeners.
     *
     * @param percent  the percent.
     *
     * @see #getEndPercent()
     */
    public void setEndPercent(double percent) {
<span class="fc" id="L224">        this.endPercent = percent;</span>
<span class="fc" id="L225">        fireChangeEvent();</span>
<span class="fc" id="L226">    }</span>

    /**
     * Draws the bar for a single (series, category) data item.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the dataset.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     * @param pass  the pass index.
     */
    public void drawItem(Graphics2D g2,
                         CategoryItemRendererState state,
                         Rectangle2D dataArea,
                         CategoryPlot plot,
                         CategoryAxis domainAxis,
                         ValueAxis rangeAxis,
                         CategoryDataset dataset,
                         int row,
                         int column,
                         int pass) {

<span class="pc bpc" id="L253" title="1 of 2 branches missed.">         if (dataset instanceof GanttCategoryDataset) {</span>
<span class="fc" id="L254">             GanttCategoryDataset gcd = (GanttCategoryDataset) dataset;</span>
<span class="fc" id="L255">             drawTasks(g2, state, dataArea, plot, domainAxis, rangeAxis, gcd,</span>
                     row, column);
<span class="fc" id="L257">         }</span>
         else {  // let the superclass handle it...
<span class="nc" id="L259">             super.drawItem(g2, state, dataArea, plot, domainAxis, rangeAxis,</span>
                     dataset, row, column, pass);
         }

<span class="fc" id="L263">     }</span>

    /**
     * Draws the tasks/subtasks for one item.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data plot area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the data.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     */
    protected void drawTasks(Graphics2D g2,
                             CategoryItemRendererState state,
                             Rectangle2D dataArea,
                             CategoryPlot plot,
                             CategoryAxis domainAxis,
                             ValueAxis rangeAxis,
                             GanttCategoryDataset dataset,
                             int row,
                             int column) {

<span class="fc" id="L288">        int count = dataset.getSubIntervalCount(row, column);</span>
<span class="pc bpc" id="L289" title="1 of 2 branches missed.">        if (count == 0) {</span>
<span class="fc" id="L290">            drawTask(g2, state, dataArea, plot, domainAxis, rangeAxis,</span>
                    dataset, row, column);
        }

<span class="fc" id="L294">        PlotOrientation orientation = plot.getOrientation();</span>
<span class="pc bpc" id="L295" title="1 of 2 branches missed.">        for (int subinterval = 0; subinterval &lt; count; subinterval++) {</span>

<span class="nc" id="L297">            RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();</span>

            // value 0
<span class="nc" id="L300">            Number value0 = dataset.getStartValue(row, column, subinterval);</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">            if (value0 == null) {</span>
<span class="nc" id="L302">                return;</span>
            }
<span class="nc" id="L304">            double translatedValue0 = rangeAxis.valueToJava2D(</span>
<span class="nc" id="L305">                    value0.doubleValue(), dataArea, rangeAxisLocation);</span>

            // value 1
<span class="nc" id="L308">            Number value1 = dataset.getEndValue(row, column, subinterval);</span>
<span class="nc bnc" id="L309" title="All 2 branches missed.">            if (value1 == null) {</span>
<span class="nc" id="L310">                return;</span>
            }
<span class="nc" id="L312">            double translatedValue1 = rangeAxis.valueToJava2D(</span>
<span class="nc" id="L313">                    value1.doubleValue(), dataArea, rangeAxisLocation);</span>

<span class="nc bnc" id="L315" title="All 2 branches missed.">            if (translatedValue1 &lt; translatedValue0) {</span>
<span class="nc" id="L316">                double temp = translatedValue1;</span>
<span class="nc" id="L317">                translatedValue1 = translatedValue0;</span>
<span class="nc" id="L318">                translatedValue0 = temp;</span>
            }

<span class="nc" id="L321">            double rectStart = calculateBarW0(plot, plot.getOrientation(),</span>
                    dataArea, domainAxis, state, row, column);
<span class="nc" id="L323">            double rectLength = Math.abs(translatedValue1 - translatedValue0);</span>
<span class="nc" id="L324">            double rectBreadth = state.getBarWidth();</span>

            // DRAW THE BARS...
<span class="nc" id="L327">            Rectangle2D bar = null;</span>
<span class="nc" id="L328">            RectangleEdge barBase = null;</span>
<span class="nc bnc" id="L329" title="All 2 branches missed.">            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L330">                bar = new Rectangle2D.Double(translatedValue0, rectStart,</span>
                        rectLength, rectBreadth);
<span class="nc" id="L332">                barBase = RectangleEdge.LEFT;</span>
            }
<span class="nc bnc" id="L334" title="All 2 branches missed.">            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L335">                bar = new Rectangle2D.Double(rectStart, translatedValue0,</span>
                        rectBreadth, rectLength);
<span class="nc" id="L337">                barBase = RectangleEdge.BOTTOM;</span>
            }

<span class="nc" id="L340">            Rectangle2D completeBar = null;</span>
<span class="nc" id="L341">            Rectangle2D incompleteBar = null;</span>
<span class="nc" id="L342">            Number percent = dataset.getPercentComplete(row, column,</span>
                    subinterval);
<span class="nc" id="L344">            double start = getStartPercent();</span>
<span class="nc" id="L345">            double end = getEndPercent();</span>
<span class="nc bnc" id="L346" title="All 2 branches missed.">            if (percent != null) {</span>
<span class="nc" id="L347">                double p = percent.doubleValue();</span>
<span class="nc bnc" id="L348" title="All 2 branches missed.">                if (orientation == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L349">                    completeBar = new Rectangle2D.Double(translatedValue0,</span>
                            rectStart + start * rectBreadth, rectLength * p,
                            rectBreadth * (end - start));
<span class="nc" id="L352">                    incompleteBar = new Rectangle2D.Double(translatedValue0</span>
                            + rectLength * p, rectStart + start * rectBreadth,
                            rectLength * (1 - p), rectBreadth * (end - start));
                }
<span class="nc bnc" id="L356" title="All 2 branches missed.">                else if (orientation == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L357">                    completeBar = new Rectangle2D.Double(rectStart + start</span>
                            * rectBreadth, translatedValue0 + rectLength
                            * (1 - p), rectBreadth * (end - start),
                            rectLength * p);
<span class="nc" id="L361">                    incompleteBar = new Rectangle2D.Double(rectStart + start</span>
                            * rectBreadth, translatedValue0, rectBreadth
                            * (end - start), rectLength * (1 - p));
                }

            }

<span class="nc bnc" id="L368" title="All 2 branches missed.">            if (getShadowsVisible()) {</span>
<span class="nc" id="L369">                getBarPainter().paintBarShadow(g2, this, row, column, bar,</span>
                        barBase, true);
            }
<span class="nc" id="L372">            getBarPainter().paintBar(g2, this, row, column, bar, barBase);</span>

<span class="nc bnc" id="L374" title="All 2 branches missed.">            if (completeBar != null) {</span>
<span class="nc" id="L375">                g2.setPaint(getCompletePaint());</span>
<span class="nc" id="L376">                g2.fill(completeBar);</span>
            }
<span class="nc bnc" id="L378" title="All 2 branches missed.">            if (incompleteBar != null) {</span>
<span class="nc" id="L379">                g2.setPaint(getIncompletePaint());</span>
<span class="nc" id="L380">                g2.fill(incompleteBar);</span>
            }
<span class="nc bnc" id="L382" title="All 2 branches missed.">            if (isDrawBarOutline()</span>
<span class="nc bnc" id="L383" title="All 2 branches missed.">                    &amp;&amp; state.getBarWidth() &gt; BAR_OUTLINE_WIDTH_THRESHOLD) {</span>
<span class="nc" id="L384">                g2.setStroke(getItemStroke(row, column));</span>
<span class="nc" id="L385">                g2.setPaint(getItemOutlinePaint(row, column));</span>
<span class="nc" id="L386">                g2.draw(bar);</span>
            }

<span class="nc bnc" id="L389" title="All 2 branches missed.">            if (subinterval == count - 1) {</span>
                // submit the current data point as a crosshair candidate
<span class="nc" id="L391">                int datasetIndex = plot.indexOf(dataset);</span>
<span class="nc" id="L392">                Comparable columnKey = dataset.getColumnKey(column);</span>
<span class="nc" id="L393">                Comparable rowKey = dataset.getRowKey(row);</span>
<span class="nc" id="L394">                double xx = domainAxis.getCategorySeriesMiddle(columnKey,</span>
<span class="nc" id="L395">                        rowKey, dataset, getItemMargin(), dataArea,</span>
<span class="nc" id="L396">                        plot.getDomainAxisEdge());</span>
<span class="nc" id="L397">                updateCrosshairValues(state.getCrosshairState(),</span>
<span class="nc" id="L398">                        dataset.getRowKey(row), dataset.getColumnKey(column),</span>
<span class="nc" id="L399">                        value1.doubleValue(), datasetIndex, xx,</span>
                        translatedValue1, orientation);

            }
            // collect entity and tool tip information...
<span class="nc bnc" id="L404" title="All 2 branches missed.">            if (state.getInfo() != null) {</span>
<span class="nc" id="L405">                EntityCollection entities = state.getEntityCollection();</span>
<span class="nc bnc" id="L406" title="All 2 branches missed.">                if (entities != null) {</span>
<span class="nc" id="L407">                    addItemEntity(entities, dataset, row, column, bar);</span>
                }
            }
        }
<span class="fc" id="L411">    }</span>

    /**
     * Draws a single task.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data plot area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the data.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     */
    protected void drawTask(Graphics2D g2,
                            CategoryItemRendererState state,
                            Rectangle2D dataArea,
                            CategoryPlot plot,
                            CategoryAxis domainAxis,
                            ValueAxis rangeAxis,
                            GanttCategoryDataset dataset,
                            int row,
                            int column) {

<span class="fc" id="L436">        PlotOrientation orientation = plot.getOrientation();</span>
<span class="fc" id="L437">        RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();</span>

        // Y0
<span class="fc" id="L440">        Number value0 = dataset.getEndValue(row, column);</span>
<span class="pc bpc" id="L441" title="1 of 2 branches missed.">        if (value0 == null) {</span>
<span class="nc" id="L442">            return;</span>
        }
<span class="fc" id="L444">        double java2dValue0 = rangeAxis.valueToJava2D(value0.doubleValue(),</span>
                dataArea, rangeAxisLocation);

        // Y1
<span class="fc" id="L448">        Number value1 = dataset.getStartValue(row, column);</span>
<span class="pc bpc" id="L449" title="1 of 2 branches missed.">        if (value1 == null) {</span>
<span class="nc" id="L450">            return;</span>
        }
<span class="fc" id="L452">        double java2dValue1 = rangeAxis.valueToJava2D(value1.doubleValue(),</span>
                dataArea, rangeAxisLocation);

<span class="fc bfc" id="L455" title="All 2 branches covered.">        if (java2dValue1 &lt; java2dValue0) {</span>
<span class="fc" id="L456">            double temp = java2dValue1;</span>
<span class="fc" id="L457">            java2dValue1 = java2dValue0;</span>
<span class="fc" id="L458">            java2dValue0 = temp;</span>
<span class="fc" id="L459">            value1 = value0;</span>
        }

<span class="fc" id="L462">        double rectStart = calculateBarW0(plot, orientation, dataArea,</span>
                domainAxis, state, row, column);
<span class="fc" id="L464">        double rectBreadth = state.getBarWidth();</span>
<span class="fc" id="L465">        double rectLength = Math.abs(java2dValue1 - java2dValue0);</span>

<span class="fc" id="L467">        Rectangle2D bar = null;</span>
<span class="fc" id="L468">        RectangleEdge barBase = null;</span>
<span class="pc bpc" id="L469" title="1 of 2 branches missed.">        if (orientation == PlotOrientation.HORIZONTAL) {</span>
<span class="fc" id="L470">            bar = new Rectangle2D.Double(java2dValue0, rectStart, rectLength,</span>
                    rectBreadth);
<span class="fc" id="L472">            barBase = RectangleEdge.LEFT;</span>
        }
<span class="nc bnc" id="L474" title="All 2 branches missed.">        else if (orientation == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L475">            bar = new Rectangle2D.Double(rectStart, java2dValue1, rectBreadth,</span>
                    rectLength);
<span class="nc" id="L477">            barBase = RectangleEdge.BOTTOM;</span>
        }

<span class="fc" id="L480">        Rectangle2D completeBar = null;</span>
<span class="fc" id="L481">        Rectangle2D incompleteBar = null;</span>
<span class="fc" id="L482">        Number percent = dataset.getPercentComplete(row, column);</span>
<span class="fc" id="L483">        double start = getStartPercent();</span>
<span class="fc" id="L484">        double end = getEndPercent();</span>
<span class="pc bpc" id="L485" title="1 of 2 branches missed.">        if (percent != null) {</span>
<span class="nc" id="L486">            double p = percent.doubleValue();</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L488">                completeBar = new Rectangle2D.Double(java2dValue0,</span>
                        rectStart + start * rectBreadth, rectLength * p,
                        rectBreadth * (end - start));
<span class="nc" id="L491">                incompleteBar = new Rectangle2D.Double(java2dValue0</span>
                        + rectLength * p, rectStart + start * rectBreadth,
                        rectLength * (1 - p), rectBreadth * (end - start));
            }
<span class="nc bnc" id="L495" title="All 2 branches missed.">            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L496">                completeBar = new Rectangle2D.Double(rectStart + start</span>
                        * rectBreadth, java2dValue1 + rectLength * (1 - p),
                        rectBreadth * (end - start), rectLength * p);
<span class="nc" id="L499">                incompleteBar = new Rectangle2D.Double(rectStart + start</span>
                        * rectBreadth, java2dValue1, rectBreadth * (end
                        - start), rectLength * (1 - p));
            }

        }

<span class="pc bpc" id="L506" title="1 of 2 branches missed.">        if (getShadowsVisible()) {</span>
<span class="nc" id="L507">            getBarPainter().paintBarShadow(g2, this, row, column, bar,</span>
                    barBase, true);
        }
<span class="fc" id="L510">        getBarPainter().paintBar(g2, this, row, column, bar, barBase);</span>

<span class="pc bpc" id="L512" title="1 of 2 branches missed.">        if (completeBar != null) {</span>
<span class="nc" id="L513">            g2.setPaint(getCompletePaint());</span>
<span class="nc" id="L514">            g2.fill(completeBar);</span>
        }
<span class="pc bpc" id="L516" title="1 of 2 branches missed.">        if (incompleteBar != null) {</span>
<span class="nc" id="L517">            g2.setPaint(getIncompletePaint());</span>
<span class="nc" id="L518">            g2.fill(incompleteBar);</span>
        }

        // draw the outline...
<span class="pc bpc" id="L522" title="1 of 2 branches missed.">        if (isDrawBarOutline()</span>
<span class="nc bnc" id="L523" title="All 2 branches missed.">                &amp;&amp; state.getBarWidth() &gt; BAR_OUTLINE_WIDTH_THRESHOLD) {</span>
<span class="nc" id="L524">            Stroke stroke = getItemOutlineStroke(row, column);</span>
<span class="nc" id="L525">            Paint paint = getItemOutlinePaint(row, column);</span>
<span class="nc bnc" id="L526" title="All 4 branches missed.">            if (stroke != null &amp;&amp; paint != null) {</span>
<span class="nc" id="L527">                g2.setStroke(stroke);</span>
<span class="nc" id="L528">                g2.setPaint(paint);</span>
<span class="nc" id="L529">                g2.draw(bar);</span>
            }
        }

<span class="fc" id="L533">        CategoryItemLabelGenerator generator = getItemLabelGenerator(row,</span>
                column);
<span class="pc bpc" id="L535" title="3 of 4 branches missed.">        if (generator != null &amp;&amp; isItemLabelVisible(row, column)) {</span>
<span class="nc" id="L536">            drawItemLabel(g2, dataset, row, column, plot, generator, bar,</span>
                    false);
        }

        // submit the current data point as a crosshair candidate
<span class="fc" id="L541">        int datasetIndex = plot.indexOf(dataset);</span>
<span class="fc" id="L542">        Comparable columnKey = dataset.getColumnKey(column);</span>
<span class="fc" id="L543">        Comparable rowKey = dataset.getRowKey(row);</span>
<span class="fc" id="L544">        double xx = domainAxis.getCategorySeriesMiddle(columnKey, rowKey,</span>
<span class="fc" id="L545">                dataset, getItemMargin(), dataArea, plot.getDomainAxisEdge());</span>
<span class="fc" id="L546">        updateCrosshairValues(state.getCrosshairState(),</span>
<span class="fc" id="L547">                dataset.getRowKey(row), dataset.getColumnKey(column),</span>
<span class="fc" id="L548">                value1.doubleValue(), datasetIndex, xx, java2dValue1,</span>
                orientation);

        // collect entity and tool tip information...
<span class="fc" id="L552">        EntityCollection entities = state.getEntityCollection();</span>
<span class="pc bpc" id="L553" title="1 of 2 branches missed.">        if (entities != null) {</span>
<span class="nc" id="L554">            addItemEntity(entities, dataset, row, column, bar);</span>
        }
<span class="fc" id="L556">    }</span>

    /**
     * Returns the Java2D coordinate for the middle of the specified data item.
     *
     * @param rowKey  the row key.
     * @param columnKey  the column key.
     * @param dataset  the dataset.
     * @param axis  the axis.
     * @param area  the drawing area.
     * @param edge  the edge along which the axis lies.
     *
     * @return The Java2D coordinate.
     *
     * @since 1.0.11
     */
    public double getItemMiddle(Comparable rowKey, Comparable columnKey,
            CategoryDataset dataset, CategoryAxis axis, Rectangle2D area,
            RectangleEdge edge) {
<span class="nc" id="L575">        return axis.getCategorySeriesMiddle(columnKey, rowKey, dataset,</span>
<span class="nc" id="L576">                getItemMargin(), area, edge);</span>
    }

    /**
     * Tests this renderer for equality with an arbitrary object.
     *
     * @param obj  the object (&lt;code&gt;null&lt;/code&gt; permitted).
     *
     * @return A boolean.
     */
    public boolean equals(Object obj) {
<span class="pc bpc" id="L587" title="1 of 2 branches missed.">        if (obj == this) {</span>
<span class="nc" id="L588">            return true;</span>
        }
<span class="pc bpc" id="L590" title="1 of 2 branches missed.">        if (!(obj instanceof GanttRenderer)) {</span>
<span class="nc" id="L591">            return false;</span>
        }
<span class="fc" id="L593">        GanttRenderer that = (GanttRenderer) obj;</span>
<span class="fc bfc" id="L594" title="All 2 branches covered.">        if (!PaintUtilities.equal(this.completePaint, that.completePaint)) {</span>
<span class="fc" id="L595">            return false;</span>
        }
<span class="fc bfc" id="L597" title="All 2 branches covered.">        if (!PaintUtilities.equal(this.incompletePaint, that.incompletePaint)) {</span>
<span class="fc" id="L598">            return false;</span>
        }
<span class="fc bfc" id="L600" title="All 2 branches covered.">        if (this.startPercent != that.startPercent) {</span>
<span class="fc" id="L601">            return false;</span>
        }
<span class="fc bfc" id="L603" title="All 2 branches covered.">        if (this.endPercent != that.endPercent) {</span>
<span class="fc" id="L604">            return false;</span>
        }
<span class="fc" id="L606">        return super.equals(obj);</span>
    }

    /**
     * Provides serialization support.
     *
     * @param stream  the output stream.
     *
     * @throws IOException  if there is an I/O error.
     */
    private void writeObject(ObjectOutputStream stream) throws IOException {
<span class="fc" id="L617">        stream.defaultWriteObject();</span>
<span class="fc" id="L618">        SerialUtilities.writePaint(this.completePaint, stream);</span>
<span class="fc" id="L619">        SerialUtilities.writePaint(this.incompletePaint, stream);</span>
<span class="fc" id="L620">    }</span>

    /**
     * Provides serialization support.
     *
     * @param stream  the input stream.
     *
     * @throws IOException  if there is an I/O error.
     * @throws ClassNotFoundException  if there is a classpath problem.
     */
    private void readObject(ObjectInputStream stream)
        throws IOException, ClassNotFoundException {
<span class="fc" id="L632">        stream.defaultReadObject();</span>
<span class="fc" id="L633">        this.completePaint = SerialUtilities.readPaint(stream);</span>
<span class="fc" id="L634">        this.incompletePaint = SerialUtilities.readPaint(stream);</span>
<span class="fc" id="L635">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>